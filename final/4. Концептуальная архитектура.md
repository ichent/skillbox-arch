```mermaid

graph TD
  subgraph MobileApp [Мобильное приложение]
    WorkoutsMobile[Тренировки - Mobile]
    ProfileMobile[Профили - Mobile]

    subgraph Hardware_Layer [Слой оборудования]
      SensorHandler[Обработчик данных датчиков]
      BuiltInSensors[Встроенные датчики устройства]
      ExternalSensors[Внешние датчики]
      PhoneHealthAPI[Phone Health API]
    end
  end

  subgraph Backend [Серверная часть]
    APIGateway[API Gateway]
    Identity[Identity & Auth]
    CoreServices[Геймификация, Промо и реклама, Профили пользователей, Управление инвентарем]
    WorkoutsService[Управление тренировками]
    Notify[Уведомления]
    DataStore[(Core БД)]
    WorkoutsDataStore[(БД тренировок)]
  end

  %% Потоки данных с датчиков
  BuiltInSensors -->|данные| SensorHandler
  ExternalSensors -->|данные| SensorHandler
  SensorHandler --> WorkoutsMobile
  PhoneHealthAPI --> WorkoutsMobile

  %% Соединение клиента с сервером
  WorkoutsMobile --> APIGateway
  ProfileMobile --> APIGateway
  APIGateway --> Identity
  CoreServices --> DataStore
  WorkoutsService --> WorkoutsDataStore
  WorkoutsService --> Notify
  CoreServices --> Notify
  Notify --> WorkoutsMobile
  Notify --> ProfileMobile
  APIGateway --> CoreServices
  APIGateway --> WorkoutsService