Выбранная микросервисная архитектура с использованием событийно-ориентированного подхода (Event-Driven) обеспечивает выполнение ключевых атрибутов качества (Масштабируемость, Надежность), но в то же время вводит ряд технических сложностей и рисков. Ниже приведен анализ принятых архитектурных компромиссов.

1. Анализ архитектурных компромиссов (Trade-offs)

    При проектировании были приняты следующие ключевые компромиссные решения:

    А. Сложность эксплуатации (Operational Complexity) против Масштабируемости
    * Выбор: Микросервисы (K8s) вместо Монолита.
    * Плюс (Gain): Возможность независимого масштабирования модуля обработки телеметрии, который испытывает пиковые нагрузки, не затрагивая остальные части системы.
    * Минус (Cost): Экспоненциальный рост сложности инфраструктуры. Необходимость настройки Service Discovery, балансировки нагрузки, распределенной трассировки и сбора логов с десятков контейнеров.
    * Обоснование: Бизнес-требование R-1 (Масштабируемость при массовых мероприятиях) является критическим. Монолит не сможет эффективно обработать поток IoT-данных от 100k устройств.

    Б. Согласованность в конечном счете (Eventual Consistency) против Строгой согласованности (Strong Consistency)
    * Выбор: Асинхронная обработка через Kafka (BASE-модель) вместо распределенных ACID-транзакций (2PC).
    * Плюс (Gain): Высокая доступность (Availability) и отзывчивость системы. Пользователь получает мгновенное подтверждение сохранения тренировки, не дожидаясь расчета всех рейтингов.
    * Минус (Cost): Временной лаг отображения данных. Пользователь может увидеть обновление своего уровня или рейтинга с задержкой в несколько секунд после финиша.
    * Обоснование: Согласно CAP-теореме, для распределенной системы с высоким риском задержек сети (Partition Tolerance) мы жертвуем мгновенной согласованностью ради Доступности (AP-система), что приемлемо для функционала геймификации.

    В. Скорость разработки (Time-to-Market) против Нативной производительности
    * Выбор: React Native (Cross-platform) вместо Native (Swift/Kotlin).
    * Плюс (Gain): Единая кодовая база, уменьшение команды разработки в 1.5-2 раза, синхронный выпуск фич на обе платформы.
    * Минус (Cost): Потенциальные проблемы с производительностью при интенсивной работе с Bluetooth-сенсорами (Bridge overhead).
    * Обоснование: Ограниченные ресурсы проекта и необходимость быстрого запуска MVP. Риск производительности минимизируется выносом тяжелых вычислений на нативный уровень (Native Modules) или на бэкенд.


2. Анализ рисков архитектуры и стратегии их смягчения

    В таблице ниже приведены идентифицированные риски реализации выбранной архитектуры и меры по их минимизации.

    [Таблица рисков]((https://github.com/ichent/skillbox-arch/blob/main/final/risk.png))


3. Итоговая оценка архитектуры

    Выбранная архитектура оценивается как устойчивая и соответствующая заявленным бизнес-целям.
    Выявленные риски лежат преимущественно в плоскости эксплуатационной сложности (DevOps), что решается использованием управляемых облачных сервисов (Managed Kubernetes, Managed Kafka) и автоматизацией процессов CI/CD. Технические риски производительности мобильного приложения нивелируются возможностью оптимизации критических путей через нативные модули без переписывания всего приложения.